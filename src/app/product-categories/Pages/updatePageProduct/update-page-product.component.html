<div class="container my-5">
  <h2 class="mb-4">Update Product</h2>

  <form [formGroup]="productForm" (ngSubmit)="submitUpdate()" enctype="multipart/form-data">
    <div class="row g-3">

      <div class="col-md-6">
        <label class="form-label">Product Name</label>
        <input type="text" class="form-control" formControlName="name" />
        <div *ngIf="productForm.get('name')?.invalid && productForm.get('name')?.touched" class="text-danger">
          Product name is required.
        </div>
      </div>

      <div class="col-md-6">
        <label class="form-label">Brand</label>
        <input type="text" class="form-control" formControlName="brand" />
        <div *ngIf="productForm.get('brand')?.invalid && productForm.get('brand')?.touched" class="text-danger">
          Brand is required.
        </div>
      </div>

      <div class="col-md-6">
        <label class="form-label">Price</label>
        <input type="number" class="form-control" formControlName="price" />
        <div *ngIf="productForm.get('price')?.invalid && productForm.get('price')?.touched" class="text-danger">
          Price must be a positive number.
        </div>
      </div>

      <div class="col-md-6">
        <label class="form-label">Category</label>
        <select class="form-select" formControlName="category">
          <option *ngFor="let cat of categories" [ngValue]="cat">{{ cat.name }}</option>
        </select>
        <div *ngIf="productForm.get('category')?.invalid && productForm.get('category')?.touched" class="text-danger">
          Category is required.
        </div>
      </div>

      <div class="col-md-6">
        <label class="form-label">Product Image</label>
        <input type="file" class="form-control" (change)="onImageSelected($event)" />
        <img *ngIf="imagePreview" [src]="imagePreview" class="mt-2" alt="Preview" width="150" />
      </div>

      <div class="col-12 text-end">
        <button type="submit" class="btn btn-success" [disabled]="productForm.invalid">Update Product</button>
      </div>
    </div>
  </form>
</div>

